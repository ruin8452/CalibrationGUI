<Page x:Class="CalibrationNewGUI.UI.MonitorPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:fa="clr-namespace:FontAwesome.WPF;assembly=FontAwesome.WPF"
      xmlns:local="clr-namespace:CalibrationNewGUI.UI"
      mc:Ignorable="d"
      Title="MonitorPage">

    <Page.Resources>
        <Style x:Key="RunBaseStyle" TargetType="Run">
            <Setter Property="FontFamily" Value="NanumGothic"/>
            <Setter Property="FontWeight" Value="DemiBold"/>
        </Style>
        <Style x:Key="CalTypeText" TargetType="Run" BasedOn="{StaticResource RunBaseStyle}">
            <Style.Triggers>
                <DataTrigger Binding="{Binding ElementName=VoltCalBtn, Path=IsChecked}" Value="True">
                    <Setter Property="Text" Value="mV"/>
                </DataTrigger>
                <DataTrigger Binding="{Binding ElementName=CurrCalBtn, Path=IsChecked}" Value="True">
                    <Setter Property="Text" Value="mA"/>
                </DataTrigger>
            </Style.Triggers>
        </Style>
        <Style x:Key="RadioStyle" TargetType="RadioButton" BasedOn="{StaticResource RadioBaseToggle}">
            <Setter Property="FontSize" Value="17"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderBrush" Value="Transparent"/>
            <Style.Triggers>
                <Trigger Property="IsChecked" Value="True">
                    <Setter Property="Background" Value="DodgerBlue"/>
                </Trigger>
                <Trigger Property="IsChecked" Value="False">
                    <Setter Property="Background" Value="Transparent"/>
                </Trigger>
                
                <EventTrigger RoutedEvent="UIElement.MouseEnter">
                    <BeginStoryboard Storyboard="{StaticResource BorderColorAni_TransToBlue}" />
                </EventTrigger>
                <EventTrigger RoutedEvent="UIElement.MouseLeave">
                    <BeginStoryboard Storyboard="{StaticResource BorderColorAni_BlueToTrans}" />
                </EventTrigger>
            </Style.Triggers>
        </Style>
        
    </Page.Resources>

    <StackPanel Background="{StaticResource PageBackground}">
        <Grid Margin="0,15,0,5">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!--CAL 부분 Display-->
            <StackPanel Grid.Column="0">
                <TextBlock Text="CAL" Foreground="White" FontSize="35" HorizontalAlignment="Center" FontFamily="NanumGothic" FontWeight="Bold"/>
                <!--파일 선택-->
                <Border BorderBrush="#FF53609B" BorderThickness="0,1.5,1.5,1.5" Margin="5,0">
                    <Grid Height="25">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="50"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="70"/>
                            <ColumnDefinition Width="70"/>
                        </Grid.ColumnDefinitions>

                        <Grid>
                            <Rectangle Fill="#FF53609B"/>
                            <TextBlock Text="파일" Foreground="White" FontFamily="NanumGothic Light" FontSize="15" VerticalAlignment="Center" HorizontalAlignment="Center"/>
                        </Grid>
                        <TextBox Text="sssssssssssssss" Grid.Column="1" Foreground="White" FontFamily="NanumGothic Light" FontSize="15" FontWeight="Bold" HorizontalAlignment="Left" Background="{x:Null}" BorderBrush="{x:Null}" VerticalContentAlignment="Stretch" HorizontalContentAlignment="Stretch" VerticalAlignment="Center"/>
                        <Button Content="열기" Grid.Column="2" BorderBrush="{x:Null}" Foreground="White" BorderThickness="0" Background="#FF53609B" Margin="2,2,0,2"/>
                        <Button Content="저장" Grid.Column="3" BorderBrush="{x:Null}" Foreground="White" BorderThickness="0" Background="#FF53609B" Margin="2"/>
                    </Grid>
                </Border>

                <!--설정값 및 포인트 컨트롤-->
                <Grid Margin="5,25,5,5">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="165"/>
                    </Grid.ColumnDefinitions>

                    <StackPanel Orientation="Horizontal">
                        <TextBlock FontSize="15" Foreground="White" FontFamily="NanumGothic Light" VerticalAlignment="Center">
                            허용 오차 : <Run Text="100" Style="{StaticResource RunBaseStyle}"/><Run Style="{StaticResource CalTypeText}"/>
                            / 딜레이 : <Run Text="100" Style="{StaticResource RunBaseStyle}"/><Run Text="ms" Style="{StaticResource RunBaseStyle}"/>
                            / 자동 저장 회수 : <Run Text="1" Style="{StaticResource RunBaseStyle}"/>
                        </TextBlock>
                    </StackPanel>

                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Grid.Column="1">
                        <Button Background="Transparent" BorderBrush="{x:Null}" Margin="0,0,5,0" >
                            <fa:ImageAwesome Icon="Play" Foreground="White" Width="18" ToolTip="CAL 시작"/>
                        </Button>
                        <Button Background="Transparent" BorderBrush="{x:Null}" Margin="0,0,5,0" >
                            <fa:ImageAwesome Icon="Stop" Foreground="White" Width="20" ToolTip="CAL 정지"/>
                        </Button>
                        
                        <Rectangle Fill="DodgerBlue" Width="3" RadiusY="1" RadiusX="1" Margin="0,0,5,0"/>

                        <Button Background="Transparent" BorderBrush="{x:Null}" Margin="0,0,5,0" >
                            <fa:ImageAwesome Icon="Plus" Foreground="White" Width="20" ToolTip="CAL 포인트 추가"/>
                        </Button>
                        <Button Background="Transparent" BorderBrush="{x:Null}" Margin="0,0,5,0" >
                            <fa:ImageAwesome Icon="Minus" Foreground="White" Width="20" ToolTip="CAL 포인트 삭제"/>
                        </Button>
                        
                        <Rectangle Fill="DodgerBlue" Width="3" RadiusY="1" RadiusX="1" Margin="0,0,5,0"/>

                        <Button Background="Transparent" BorderBrush="{x:Null}" Margin="0,0,5,0" >
                            <fa:ImageAwesome Icon="Save" Foreground="White" Width="20" ToolTip="데이터 저장"/>
                        </Button>
                    </StackPanel>
                </Grid>

                <!--포인트 그리드-->
                <DataGrid Grid.Column="0" AutoGenerateColumns="False" SelectionMode="Single" CanUserAddRows="False"
                                  AlternationCount="2" AlternatingRowBackground="White" Height="200" BorderThickness="1.5" BorderBrush="#FF53609B"
                                  ScrollViewer.VerticalScrollBarVisibility="Auto" Margin="5,0" CanUserSortColumns="False">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="NO"      IsReadOnly="True"/>
                        <DataGridTextColumn Header="SetVolt" />
                        <DataGridTextColumn Header="SetCurr" />
                        <DataGridTextColumn Header="OutVolt" Binding="{Binding CALOutVolt, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, StringFormat='#,0.#'}"   IsReadOnly="True"/>
                        <DataGridTextColumn Header="OutCurr" Binding="{Binding CALOutCurr, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, StringFormat='#,0.###'}" IsReadOnly="True"/>
                        <DataGridTextColumn Header="OutDMM"  Binding="{Binding CALDMMOut, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, StringFormat='#,0.###'}"  IsReadOnly="True"/>
                    </DataGrid.Columns>
                </DataGrid>

            </StackPanel>


            <!--MEA 부분 Display-->
            <StackPanel Grid.Column="1">
                <TextBlock Text="MEA" Foreground="White" FontSize="35" HorizontalAlignment="Center" FontFamily="NanumGothic" FontWeight="Bold"/>
                <!--파일 선택-->
                <Border BorderBrush="#FF53609B" BorderThickness="0,1.5,1.5,1.5" Margin="5,0">
                    <Grid Height="25">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="50"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="70"/>
                            <ColumnDefinition Width="70"/>
                        </Grid.ColumnDefinitions>

                        <Grid>
                            <Rectangle Fill="#FF53609B"/>
                            <TextBlock Text="파일" Foreground="White" FontFamily="NanumGothic Light" FontSize="15" VerticalAlignment="Center" HorizontalAlignment="Center"/>
                        </Grid>
                        <TextBox Text="sssssssssssssss" Grid.Column="1" Foreground="White" FontFamily="NanumGothic Light" FontSize="15" FontWeight="Bold" HorizontalAlignment="Left" Background="{x:Null}" BorderBrush="{x:Null}" VerticalContentAlignment="Stretch" HorizontalContentAlignment="Stretch" VerticalAlignment="Center"/>
                        <Button Content="열기" Grid.Column="2" BorderBrush="{x:Null}" Foreground="White" BorderThickness="0" Background="#FF53609B" Margin="2,2,0,2"/>
                        <Button Content="저장" Grid.Column="3" BorderBrush="{x:Null}" Foreground="White" BorderThickness="0" Background="#FF53609B" Margin="2"/>
                    </Grid>
                </Border>

                <!--설정값 및 포인트 컨트롤-->
                <Grid Margin="5,25,5,5">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="165"/>
                    </Grid.ColumnDefinitions>

                    <StackPanel Orientation="Horizontal">
                        <TextBlock FontSize="15" Foreground="White" FontFamily="NanumGothic Light" VerticalAlignment="Center">
                            허용 오차 : <Run Text="100" Style="{StaticResource RunBaseStyle}"/><Run Style="{StaticResource CalTypeText}"/>
                            / 딜레이 : <Run Text="100" Style="{StaticResource RunBaseStyle}"/><Run Text="ms" Style="{StaticResource RunBaseStyle}"/>
                            / 자동 저장 회수 : <Run Text="1" Style="{StaticResource RunBaseStyle}"/>
                        </TextBlock>
                    </StackPanel>

                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Grid.Column="1">
                        <Button Background="Transparent" BorderBrush="{x:Null}" Margin="0,0,5,0">
                            <fa:ImageAwesome Icon="Play" Foreground="White" Width="18" ToolTip="실측 CAL 시작"/>
                        </Button>
                        <Button Background="Transparent" BorderBrush="{x:Null}" Margin="0,0,5,0">
                            <fa:ImageAwesome Icon="Stop" Foreground="White" Width="20" ToolTip="실측 CAL 정지"/>
                        </Button>
                        
                        <Rectangle Fill="DodgerBlue" Width="3" RadiusY="1" RadiusX="1" Margin="0,0,5,0"/>

                        <Button Background="Transparent" BorderBrush="{x:Null}" Margin="0,0,5,0">
                            <fa:ImageAwesome Icon="Plus" Foreground="White" Width="20" ToolTip="실측 포인트 추가"/>
                        </Button>
                        <Button Background="Transparent" BorderBrush="{x:Null}" Margin="0,0,5,0">
                            <fa:ImageAwesome Icon="Minus" Foreground="White" Width="20" ToolTip="실측 포인트 삭제"/>
                        </Button>
                        
                        <Rectangle Fill="DodgerBlue" Width="3" RadiusY="1" RadiusX="1" Margin="0,0,5,0"/>

                        <Button Background="Transparent" BorderBrush="{x:Null}" Margin="0,0,5,0">
                            <fa:ImageAwesome Icon="Save" Foreground="White" Width="20" ToolTip="데이터 저장"/>
                        </Button>
                    </StackPanel>
                </Grid>

                <!--포인트 그리드-->
                <DataGrid Grid.Column="0" AutoGenerateColumns="False" SelectionMode="Single" CanUserAddRows="False"
                                  AlternationCount="2" AlternatingRowBackground="White" Height="200" BorderThickness="1.5" BorderBrush="#FF53609B"
                                  ScrollViewer.VerticalScrollBarVisibility="Auto" Margin="5,0" CanUserSortColumns="False">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="NO"      IsReadOnly="True"/>
                        <DataGridTextColumn Header="SetVolt" />
                        <DataGridTextColumn Header="SetCurr" />
                        <DataGridTextColumn Header="OutVolt" Binding="{Binding CALOutVolt, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, StringFormat='#,0.#'}"   IsReadOnly="True"/>
                        <DataGridTextColumn Header="OutCurr" Binding="{Binding CALOutCurr, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, StringFormat='#,0.###'}" IsReadOnly="True"/>
                        <DataGridTextColumn Header="OutDMM"  Binding="{Binding CALDMMOut, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, StringFormat='#,0.###'}"  IsReadOnly="True"/>
                    </DataGrid.Columns>
                </DataGrid>
            </StackPanel>
        </Grid>

        <StackPanel Orientation="Horizontal">
            <!--CAL Option-->
            <Border Width="150" BorderBrush="#FF3B456B" BorderThickness="1" Margin="5,5,0,5">
                <StackPanel>
                    <TextBlock Text="컨트롤러" Background="#FF3B456B" Padding="3" Foreground="White" FontFamily="NanumGothic" FontSize="20" FontWeight="Bold"/>

                    <StackPanel Margin="0,10,0,0">
                        <Grid Margin="0,0,0,10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <!--시작-->
                            <Button Grid.Column="0" Background="{x:Null}" BorderBrush="{x:Null}">
                                <StackPanel>
                                    <fa:ImageAwesome Foreground="DodgerBlue" Icon="Play" Height="30" Width="30" Margin="0,0,0,3"/>
                                    <TextBlock Text="시작" FontSize="14" Foreground="White" HorizontalAlignment="Center" FontFamily="NanumGothic Light"/>
                                </StackPanel>
                            </Button>
                            <!--정지-->
                            <Button Grid.Column="2" Background="{x:Null}" BorderBrush="{x:Null}">
                                <StackPanel>
                                    <fa:ImageAwesome Foreground="DodgerBlue" Icon="Stop" Height="30" Width="30" Margin="0,0,0,3"/>
                                    <TextBlock Text="정지" FontSize="14" Foreground="White" HorizontalAlignment="Center" FontFamily="NanumGothic Light"/>
                                </StackPanel>
                            </Button>
                        </Grid>

                        <TextBlock Text="CAL 타입" FontSize="14" Foreground="White" FontFamily="NanumGothic Light" HorizontalAlignment="Center"/>
                        <Grid Margin="5,5,5,10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <RadioButton x:Name="VoltCalBtn" Content="전압" Style="{StaticResource RadioStyle}" Grid.Column="0" IsChecked="True" />
                            <RadioButton x:Name="CurrCalBtn" Content="전류" Style="{StaticResource RadioStyle}" Grid.Column="1"/>
                        </Grid>

                        <TextBlock Text="채널 선택" FontSize="14" Foreground="White" FontFamily="NanumGothic Light" HorizontalAlignment="Center"/>
                        <Grid Margin="5,5,5,10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <RadioButton Content="CH1" Style="{StaticResource RadioStyle}" Grid.Column="0" IsChecked="True"/>
                            <RadioButton Content="CH2" Style="{StaticResource RadioStyle}" Grid.Column="1"/>
                            <RadioButton Content="ALL" Style="{StaticResource RadioStyle}" Grid.Column="2"/>
                        </Grid>
                    </StackPanel>
                </StackPanel>
            </Border>
            
            <!--Monitoing Box-->
            <Border BorderBrush="#FF3B456B" BorderThickness="1" Margin="5,5,0,5">
                <StackPanel>
                    <TextBlock Text="모니터링" Background="#FF3B456B" Padding="3" Foreground="White" FontFamily="NanumGothic" FontSize="20" FontWeight="Bold"/>

                    <StackPanel Orientation="Horizontal">
                        <StackPanel Margin="10">
                            <!-- 채널1 Volt -->
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                                <TextBlock Text="CH1 전압(mV)" Foreground="White" FontSize="15" FontFamily="NanumGothic" Background="{x:Null}" VerticalAlignment="Center"/>
                                <Rectangle Height="25" Width="3" Fill="DodgerBlue" RadiusY="1.5" RadiusX="1.5" Margin="5,0"/>
                                <Grid Width="190">
                                    <TextBlock Text="88888.8" Foreground="#FF2D3144" FontFamily="Digital-7 Mono" FontSize="45" Background="{x:Null}" HorizontalAlignment="Right"/>
                                    <TextBlock Text="{Binding Rect.DcOutputVolt, StringFormat=#0.0}" Foreground="White" FontFamily="Digital-7 Mono" FontSize="45" Background="{x:Null}" HorizontalAlignment="Right"/>
                                </Grid>
                            </StackPanel>
                            <!-- 채널1 Curr -->
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                                <TextBlock Text="CH1 전류(mA)" Foreground="White" FontSize="15" FontFamily="NanumGothic" Background="{x:Null}" VerticalAlignment="Center"/>
                                <Rectangle Height="25" Width="3" Fill="DodgerBlue" RadiusY="1.5" RadiusX="1.5" Margin="5,0"/>
                                <Grid Width="190">
                                    <TextBlock Text="8888888.8" Foreground="#FF2D3144" FontFamily="Digital-7 Mono" FontSize="45" Background="{x:Null}" HorizontalAlignment="Right"/>
                                    <TextBlock Text="{Binding Rect.DcOutputCurr, StringFormat=#0.0}" Foreground="White" FontFamily="Digital-7 Mono" FontSize="45" Background="{x:Null}" HorizontalAlignment="Right"/>
                                </Grid>
                            </StackPanel>
                            <!-- Dmm1 Volt -->
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                                <TextBlock Foreground="White" FontSize="15" FontFamily="NanumGothic" Background="{x:Null}" VerticalAlignment="Center">
                                    DMM(<Run Style="{StaticResource CalTypeText}" FontWeight="Normal"/>)
                                </TextBlock>
                                <Rectangle Height="25" Width="3" Fill="DodgerBlue" RadiusY="1.5" RadiusX="1.5" Margin="5,0"/>
                                <Grid Width="190">
                                    <TextBlock Text="8888888.8" Foreground="#FF2D3144" FontFamily="Digital-7 Mono" FontSize="45" Background="{x:Null}" HorizontalAlignment="Right"/>
                                    <TextBlock Text="{Binding Dmm1.DcVolt, StringFormat=#0.0}" Foreground="White" FontFamily="Digital-7 Mono" FontSize="45" Background="{x:Null}" HorizontalAlignment="Right"/>
                                </Grid>
                            </StackPanel>
                        </StackPanel>
                        <StackPanel Margin="10">
                            <!-- 채널2 Volt -->
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                                <TextBlock Text="CH2 전압(mV)" Foreground="White" FontSize="15" FontFamily="NanumGothic" Background="{x:Null}" VerticalAlignment="Center"/>
                                <Rectangle Height="25" Width="3" Fill="DodgerBlue" RadiusY="1.5" RadiusX="1.5" Margin="5,0"/>
                                <Grid Width="190">
                                    <TextBlock Text="88888.8" Foreground="#FF2D3144" FontFamily="Digital-7 Mono" FontSize="45" Background="{x:Null}" HorizontalAlignment="Right"/>
                                    <TextBlock Text="{Binding Rect.DcOutputVolt, StringFormat=#0.0}" Foreground="White" FontFamily="Digital-7 Mono" FontSize="45" Background="{x:Null}" HorizontalAlignment="Right"/>
                                </Grid>
                            </StackPanel>
                            <!-- 채널2 Curr -->
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                                <TextBlock Text="CH2 전류(mA)" Foreground="White" FontSize="15" FontFamily="NanumGothic" Background="{x:Null}" VerticalAlignment="Center"/>
                                <Rectangle Height="25" Width="3" Fill="DodgerBlue" RadiusY="1.5" RadiusX="1.5" Margin="5,0"/>
                                <Grid Width="190">
                                    <TextBlock Text="8888888.8" Foreground="#FF2D3144" FontFamily="Digital-7 Mono" FontSize="45" Background="{x:Null}" HorizontalAlignment="Right"/>
                                    <TextBlock Text="{Binding Rect.DcOutputCurr, StringFormat=#0.0}" Foreground="White" FontFamily="Digital-7 Mono" FontSize="45" Background="{x:Null}" HorizontalAlignment="Right"/>
                                </Grid>
                            </StackPanel>
                        </StackPanel>
                    </StackPanel>
                </StackPanel>
            </Border>


        </StackPanel>
        
        <!--테스트 결과-->
        <Border BorderBrush="#FF3B456B" MinHeight="100" BorderThickness="1" Margin="5,0,5,5">
            <StackPanel>
                <StackPanel Orientation="Horizontal" Background="#FF3B456B">
                    <TextBlock Text="로그" Padding="3" Foreground="White" FontFamily="NanumGothic" FontSize="20" FontWeight="Bold"/>
                    <CheckBox Content="로그 표기" Margin="20,0,0,0" Foreground="White" VerticalAlignment="Center"/>
                </StackPanel>

                <ScrollViewer x:Name="LogViewer" VerticalScrollBarVisibility="Auto">
                    <TextBlock Text="로그" Foreground="White" FontFamily="NanumBarunGothic" FontSize="14"/>
                </ScrollViewer>
            </StackPanel>
        </Border>
    </StackPanel>
</Page>
